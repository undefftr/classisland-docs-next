import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as d,a as s,d as t,w as a,b as e,e as l,r as i,o as h}from"./app-Clxb9NYX.js";const c={},g=s("h1",{id:"事件",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#事件"},[s("span",null,"事件")])],-1),k=s("p",null,"事件是相应 ClassIsland 生命周期变化和课表状态改变的重要方式。",-1),u=s("p",null,".NET 通用主机和 ClassIsland 提供了一系列的事件，您可以通过调取对应的服务等方式订阅这些事件。",-1),m=s("h2",{id:"生命周期",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#生命周期"},[s("span",null,"生命周期")])],-1),A={class:"hint-container details"},v=s("summary",null,"生命周期事件示意图",-1),C=s("p",null,"以下是 ClassIsland 的生命周期及事件触发的示意图：",-1),_={class:"table-of-contents"},B=l(`<h2 id="应用生命周期事件" tabindex="-1"><a class="header-anchor" href="#应用生命周期事件"><span>应用生命周期事件</span></a></h2><p>这些事件会在应用生命周期发生改变时触发。要订阅这些事件，需要通过以下代码获取当前应用的实例：</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> app</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> AppBase</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Current</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 注册应用启动完成事件</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">AppStarted</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;"> +=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">o</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WriteLine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;AppStarted&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="应用启动完成-appstarted" tabindex="-1"><a class="header-anchor" href="#应用启动完成-appstarted"><span>应用启动完成 <code>AppStarted</code></span></a></h3><p>在应用启动完成之后触发。</p><p><strong>事件名：</strong> <code>AppStarted</code></p><p><strong>参数：</strong> <em>无</em></p><h3 id="应用正在停止-appstopping" tabindex="-1"><a class="header-anchor" href="#应用正在停止-appstopping"><span>应用正在停止 <code>AppStopping</code></span></a></h3><p>在应用正在退出时触发。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>不要在此事件的事件处理器上进行异步操作。</p></div><p><strong>事件名：</strong> <code>AppStopping</code></p><p><strong>参数：</strong> <em>无</em></p><h2 id="主计时器事件" tabindex="-1"><a class="header-anchor" href="#主计时器事件"><span>主计时器事件</span></a></h2>`,13),f=s("code",null,"ClassIsland.Core.Abstractions.Services.ILessonService",-1),y=l('<h3 id="课表处理前事件" tabindex="-1"><a class="header-anchor" href="#课表处理前事件"><span>课表处理前事件</span></a></h3><p>在主计时器开始处理课表信息前触发。</p><p><strong>服务：</strong> <code>ClassIsland.Core.Abstractions.Services.ILessonService</code></p><p><strong>事件名：</strong> <code>PreMainTimerTicked</code></p><p><strong>参数：</strong> <em>无</em></p><h3 id="课表处理后事件" tabindex="-1"><a class="header-anchor" href="#课表处理后事件"><span>课表处理后事件</span></a></h3><p>在主计时器完成处理课表信息后触发。</p><p><strong>服务：</strong> <code>ClassIsland.Core.Abstractions.Services.ILessonService</code></p><p><strong>事件名：</strong> <code>PostMainTimerTick</code></p><p><strong>参数：</strong> <em>无</em></p><h2 id="课表事件" tabindex="-1"><a class="header-anchor" href="#课表事件"><span>课表事件</span></a></h2><p>以下事件会在课表的对应状态触发。</p><h3 id="上课事件" tabindex="-1"><a class="header-anchor" href="#上课事件"><span>上课事件</span></a></h3><p>当进入上课类型的时间点时触发。</p><p><strong>服务：</strong> <code>ClassIsland.Core.Abstractions.Services.ILessonService</code></p><p><strong>事件名：</strong> <code>OnClass</code></p><p><strong>参数：</strong> <em>无</em></p><h3 id="下课事件" tabindex="-1"><a class="header-anchor" href="#下课事件"><span>下课事件</span></a></h3><p>当进入课间休息类型的时间点时触发。</p><p><strong>服务：</strong> <code>ClassIsland.Core.Abstractions.Services.ILessonService</code></p><p><strong>事件名：</strong> <code>OnBreakingTime</code></p><p><strong>参数：</strong> <em>无</em></p><h3 id="放学事件" tabindex="-1"><a class="header-anchor" href="#放学事件"><span>放学事件</span></a></h3><p>当放学（当前时间超出今天的时间表的最后一个时间点）时触发。</p><p><strong>服务：</strong> <code>ClassIsland.Core.Abstractions.Services.ILessonService</code></p><p><strong>事件名：</strong> <code>OnAfterSchool</code></p><p><strong>参数：</strong> <em>无</em></p><h3 id="时间状态改变事件" tabindex="-1"><a class="header-anchor" href="#时间状态改变事件"><span>时间状态改变事件</span></a></h3><p>当当前时间状态改变时触发。</p><p><strong>服务：</strong> <code>ClassIsland.Core.Abstractions.Services.ILessonService</code></p><p><strong>事件名：</strong> <code>CurrentTimeStateChanged</code></p><p><strong>参数：</strong> <em>无</em></p>',32);function b(I,S){const p=i("Mermaid"),n=i("router-link"),o=i("RouteLink");return h(),d("div",null,[g,k,u,m,s("details",A,[v,C,t(p,{id:"mermaid-16",code:"eJxLy8kvT85ILCpRCHHhUgCC4BIgp7RAI1rp6a4pz6eseDph/dOuFUqxmmBZXV07Bef8vLTM9NKiVI/84pJopZetvc/3rnvZMAuo+MmO3c/m7FKKhasFKYGaGK0EkYUZCFfjk1ial5zhm5iZ55OfD1QGUQBU/HTfqud965FUOhYUgA1LTamuVkJwlGpr4UoCilJBJoVk5qYWhWQmZwMVoguhKs9PTi0u9gHi/LxioN1LWp5PaHuxft+LhchODAB6A8NYdDF8zuACy2Bogat3rcgsycxLhwX6s7WLn85Z8bKh4Wk7cmiCvZxfUABUCQsACA9kNQB/HrKH"})]),s("nav",_,[s("ul",null,[s("li",null,[t(n,{to:"#生命周期"},{default:a(()=>[e("生命周期")]),_:1})]),s("li",null,[t(n,{to:"#应用生命周期事件"},{default:a(()=>[e("应用生命周期事件")]),_:1}),s("ul",null,[s("li",null,[t(n,{to:"#应用启动完成-appstarted"},{default:a(()=>[e("应用启动完成 AppStarted")]),_:1})]),s("li",null,[t(n,{to:"#应用正在停止-appstopping"},{default:a(()=>[e("应用正在停止 AppStopping")]),_:1})])])]),s("li",null,[t(n,{to:"#主计时器事件"},{default:a(()=>[e("主计时器事件")]),_:1}),s("ul",null,[s("li",null,[t(n,{to:"#课表处理前事件"},{default:a(()=>[e("课表处理前事件")]),_:1})]),s("li",null,[t(n,{to:"#课表处理后事件"},{default:a(()=>[e("课表处理后事件")]),_:1})])])]),s("li",null,[t(n,{to:"#课表事件"},{default:a(()=>[e("课表事件")]),_:1}),s("ul",null,[s("li",null,[t(n,{to:"#上课事件"},{default:a(()=>[e("上课事件")]),_:1})]),s("li",null,[t(n,{to:"#下课事件"},{default:a(()=>[e("下课事件")]),_:1})]),s("li",null,[t(n,{to:"#放学事件"},{default:a(()=>[e("放学事件")]),_:1})]),s("li",null,[t(n,{to:"#时间状态改变事件"},{default:a(()=>[e("时间状态改变事件")]),_:1})])])])])]),B,s("p",null,[e("这些事件会每隔 50ms 触发一次，适用于进行轮询操作。要订阅这些事件，需要按照"),t(o,{to:"/dev/basics.html#%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5"},{default:a(()=>[e("基础知识")]),_:1}),e("文档中关于依赖注入的文档获取 "),f,e(" 服务。")]),y])}const T=r(c,[["render",b],["__file","events.html.vue"]]),E=JSON.parse('{"path":"/dev/events.html","title":"事件","lang":"zh-CN","frontmatter":{"description":"事件 事件是相应 ClassIsland 生命周期变化和课表状态改变的重要方式。 .NET 通用主机和 ClassIsland 提供了一系列的事件，您可以通过调取对应的服务等方式订阅这些事件。 生命周期 生命周期事件示意图 以下是 ClassIsland 的生命周期及事件触发的示意图： 应用生命周期事件 这些事件会在应用生命周期发生改变时触发。要订阅这...","head":[["meta",{"property":"og:url","content":"https://classisland.github.io/classisland-docs-next/dev/events.html"}],["meta",{"property":"og:site_name","content":"ClassIsland文档"}],["meta",{"property":"og:title","content":"事件"}],["meta",{"property":"og:description","content":"事件 事件是相应 ClassIsland 生命周期变化和课表状态改变的重要方式。 .NET 通用主机和 ClassIsland 提供了一系列的事件，您可以通过调取对应的服务等方式订阅这些事件。 生命周期 生命周期事件示意图 以下是 ClassIsland 的生命周期及事件触发的示意图： 应用生命周期事件 这些事件会在应用生命周期发生改变时触发。要订阅这..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-08-29T07:25:46.000Z"}],["meta",{"property":"article:author","content":"ClassIsland社区"}],["meta",{"property":"article:modified_time","content":"2024-08-29T07:25:46.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"事件\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-08-29T07:25:46.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"ClassIsland社区\\",\\"url\\":\\"https://classisland.tech\\"}]}"]]},"headers":[{"level":2,"title":"生命周期","slug":"生命周期","link":"#生命周期","children":[]},{"level":2,"title":"应用生命周期事件","slug":"应用生命周期事件","link":"#应用生命周期事件","children":[{"level":3,"title":"应用启动完成 AppStarted","slug":"应用启动完成-appstarted","link":"#应用启动完成-appstarted","children":[]},{"level":3,"title":"应用正在停止 AppStopping","slug":"应用正在停止-appstopping","link":"#应用正在停止-appstopping","children":[]}]},{"level":2,"title":"主计时器事件","slug":"主计时器事件","link":"#主计时器事件","children":[{"level":3,"title":"课表处理前事件","slug":"课表处理前事件","link":"#课表处理前事件","children":[]},{"level":3,"title":"课表处理后事件","slug":"课表处理后事件","link":"#课表处理后事件","children":[]}]},{"level":2,"title":"课表事件","slug":"课表事件","link":"#课表事件","children":[{"level":3,"title":"上课事件","slug":"上课事件","link":"#上课事件","children":[]},{"level":3,"title":"下课事件","slug":"下课事件","link":"#下课事件","children":[]},{"level":3,"title":"放学事件","slug":"放学事件","link":"#放学事件","children":[]},{"level":3,"title":"时间状态改变事件","slug":"时间状态改变事件","link":"#时间状态改变事件","children":[]}]}],"git":{"createdTime":1719066151000,"updatedTime":1724916346000,"contributors":[{"name":"hello8693","email":"1320998105@qq.com","commits":1}]},"readingTime":{"minutes":1.92,"words":577},"filePathRelative":"dev/events.md","localizedDate":"2024年6月22日","autoDesc":true}');export{T as comp,E as data};
